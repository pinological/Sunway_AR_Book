<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web AR Webpage Overlay</title>
    <!-- A-Frame library for building VR/AR experiences -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <!-- AR.js library for AR capabilities -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; font-family: 'Inter', sans-serif; }
        /* Ensure the AR scene takes full screen */
        a-scene {
            width: 100vw;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
        }
        /* Message box for user feedback */
        #message-box {
            position: fixed;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 16px;
            z-index: 1000;
            display: none; /* Hidden by default */
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="message-box"></div>

    <!-- A-Frame AR Scene -->
    <a-scene
        vr-mode-ui="enabled: false;"
        arjs="sourceType: webcam; debugUIEnabled: false;"
        renderer="logarithmicDepthBuffer: true;">

        <!-- Define the image marker -->
        <!-- Replace 'my-image-marker.patt' with the actual path to your generated pattern file -->
        <a-marker preset="custom" type="pattern" url="pattern-marker.patt">
            <!-- This entity will be displayed when the marker is detected -->
            <a-entity
                id="webpage-overlay"
                position="0 0 0"
                scale="1 1 1"
                visible="false"
                rotation="-90 0 0"> <!-- Rotate to face upwards from the marker -->

                <!-- Background for the simulated webpage -->
                <a-plane
                    color="#F0F0F0"
                    width="1.5"
                    height="1.0"
                    position="0 0 -0.01"
                    shader="flat"
                    material="roughness: 0.8; metalness: 0.1;"
                    geometry="primitive: plane; width: 1.5; height: 1.0;">
                </a-plane>

                <!-- Simulated Webpage Content -->
                <a-text
                    value="Welcome to AR Webpage!"
                    color="#333"
                    width="1.4"
                    position="0 0.4 0"
                    align="center"
                    wrap-count="30"
                    font="https://cdn.aframe.io/fonts/DejaVu-sdf.fnt"
                    shader="msdf"
                    text="align: center; color: #333; wrapCount: 30;"></a-text>

                <a-text
                    value="This is a simulated webpage overlayed on your image marker."
                    color="#555"
                    width="1.3"
                    position="0 0.25 0"
                    align="center"
                    wrap-count="40"
                    font="https://cdn.aframe.io/fonts/DejaVu-sdf.fnt"
                    shader="msdf"
                    text="align: center; color: #555; wrapCount: 40;"></a-text>

                <a-text
                    value="You can customize this content with more text, images, or even interactive elements."
                    color="#555"
                    width="1.3"
                    position="0 0.05 0"
                    align="center"
                    wrap-count="40"
                    font="https://cdn.aframe.io/fonts/DejaVu-sdf.fnt"
                    shader="msdf"
                    text="align: center; color: #555; wrapCount: 40;"></a-text>

                <!-- Example Button -->
                <a-box
                    color="#4CAF50"
                    width="0.5"
                    height="0.15"
                    depth="0.05"
                    position="0 -0.25 0.01"
                    material="roughness: 0.8; metalness: 0.1;"
                    class="clickable"
                    event-set__click="material.color: #66BB6A;"
                    event-set__mouseenter="material.color: #66BB6A;"
                    event-set__mouseleave="material.color: #4CAF50;">
                    <a-text
                        value="Learn More"
                        color="white"
                        width="1.0"
                        position="0 0 0.03"
                        align="center"
                        wrap-count="15"
                        font="https://cdn.aframe.io/fonts/DejaVu-sdf.fnt"
                        shader="msdf"
                        text="align: center; color: white; wrapCount: 15;"></a-text>
                </a-box>

                <!-- Placeholder Image -->
                <a-image
                    src="https://placehold.co/200x100/A0A0A0/FFFFFF?text=Image"
                    width="0.8"
                    height="0.4"
                    position="0 -0.45 0.01">
                </a-image>

            </a-entity>
        </a-marker>

        <!-- A-Frame camera -->
        <a-entity camera></a-entity>
    </a-scene>

    <script>
        // Function to display messages to the user
        function showMessage(message, duration = 3000) {
            const messageBox = document.getElementById('message-box');
            messageBox.textContent = message;
            messageBox.style.display = 'block';
            setTimeout(() => {
                messageBox.style.display = 'none';
            }, duration);
        }

        document.addEventListener('DOMContentLoaded', () => {
            const scene = document.querySelector('a-scene');
            const webpageOverlay = document.getElementById('webpage-overlay');

            // Listen for marker found event
            scene.addEventListener('markerFound', function(event) {
                console.log('Marker Found!');
                webpageOverlay.setAttribute('visible', true);
                showMessage('Marker found! Displaying webpage overlay.');
            });

            // Listen for marker lost event
            scene.addEventListener('markerLost', function(event) {
                console.log('Marker Lost!');
                webpageOverlay.setAttribute('visible', false);
                showMessage('Marker lost. Overlay hidden.', 1500);
            });

            // Handle click on the simulated button
            const learnMoreButton = webpageOverlay.querySelector('a-box');
            if (learnMoreButton) {
                learnMoreButton.addEventListener('click', () => {
                    showMessage('Button clicked! (In a real app, this would navigate or show more content)');
                    console.log('Learn More button clicked!');
                    // In a real application, you might open a new tab or change the AR content
                    // window.open('https://www.example.com', '_blank');
                });
            }

            // Initial message to guide the user
            showMessage('Point your camera at the image marker to see the AR overlay!');
        });
    </script>
</body>
</html>
